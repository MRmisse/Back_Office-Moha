<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Back Office Engineer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* ================== Modal Styles ================== */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(34, 58, 94, 0.55);
      z-index: 5000;
      display: none;
      align-items: center;
      justify-content: center;
    }
    .modal-overlay.show { display: flex; }
    .modal-content {
      background: linear-gradient(135deg, #192d61 0%, #223a5e 100%);
      border-radius: 24px;
      box-shadow: 0 12px 48px #16244799, 0 2px 8px #223a5e;
      padding: 44px 64px 36px 64px;
      min-width: 1100px;
      max-width: 1100px;
      width: 70vw;
      max-height: 88vh;
      overflow-y: auto;
      text-align: center;
      position: relative;
      color: #f5f6fa;
    }
    @media (max-width: 700px) {
      .modal-content { min-width: 90vw; padding: 18px 6vw; }
    }
    .modal-content h3 {
      margin-top: 0;
      color: #f5f6fa;
      font-size: 2.1em;
      margin-bottom: 24px;
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px #16244799, 0 1px 0 #223a5e;
      background: linear-gradient(90deg, #4e54c8 0%, #8f94fb 100%);
      border-radius: 12px;
      padding: 12px 0;
    }
    .modal-content textarea {
      width: 100%;
      min-height: 260px;
      font-size: 1.25em;
      margin-bottom: 18px;
      direction: ltr;
      resize: vertical;
      border-radius: 10px;
      border: none;
      background: rgba(255,255,255,0.13);
      color: #fff;
      box-shadow: 0 2px 10px rgba(78,84,200,0.08);
      padding: 16px;
    }
    .modal-close-btn {
      position: absolute;
      top: 18px;
      right: 24px;
      background: linear-gradient(90deg, #ff5858 0%, #f09819 100%);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.5em;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      box-shadow: 0 2px 10px rgba(255,88,88,0.10);
    }
    .modal-close-btn:hover {
      background: linear-gradient(90deg, #f09819 0%, #ff5858 100%);
      transform: scale(1.08) rotate(-2deg);
    }

    /* ================== Ø§Ù„Ø¹Ø§Ù…Ø© ================== */
    body {
      background: linear-gradient(135deg, #192d61 0%, #223a5e 100%);
      font-family: 'Cairo', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .header {
      text-align: center;
      margin-top: 40px;
      font-size: 2.5rem;
      color: #f5f6fa;
      font-weight: bold;
      letter-spacing: 2px;
      text-shadow: 0 2px 8px #16244799, 0 1px 0 #223a5e;
    }
    #user-info {
      text-align: center;
      margin-top: 6px;
      color: #e5e7eb;
      font-size: 0.9rem;
    }

    :root {
      --btn-bg-start: #3b82f6;
      --btn-bg-end: #06b6d4;
      --btn-hover-start: #2563eb;
      --btn-hover-end: #0891b2;
      --btn-shadow: 0 6px 18px rgba(59,130,246,0.25);
      --btn-shadow-hover: 0 10px 28px rgba(6,182,212,0.28);
      --ring: 0 0 0 3px rgba(59,130,246,0.35);
      --radius: 16px;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 22px;
      justify-content: center;
      align-items: start;
      margin: 64px auto 0 auto;
      max-width: 1200px;
      width: min(96%, 1200px);
    }

    /* ================== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ================== */
    button, .button, .dropbtn {
      appearance: none;
      background: linear-gradient(135deg, var(--btn-bg-start), var(--btn-bg-end));
      color: #ffffff;
      border: 1px solid transparent;
      border-radius: var(--radius);
      padding: 14px 16px;
      margin: 0;
      font-size: 1.05rem;
      line-height: 1.2;
      cursor: pointer;
      transition: background 180ms ease, transform 160ms ease, box-shadow 160ms ease, border-color 180ms ease;
      box-shadow: var(--btn-shadow);
      width: 100%;
      min-width: 0;
      font-family: inherit;
      font-weight: 600;
      letter-spacing: 0.2px;
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-align: center;
      user-select: none;
    }
    button:hover, .button:hover, .dropbtn:hover {
      background: linear-gradient(135deg, var(--btn-hover-start), var(--btn-hover-end));
      transform: translateY(-2px);
      box-shadow: var(--btn-shadow-hover);
    }
    button:active, .button:active, .dropbtn:active {
      transform: translateY(0);
      box-shadow: 0 4px 14px rgba(0,0,0,0.18);
    }
    button:focus-visible, .button:focus-visible, .dropbtn:focus-visible {
      outline: none;
      box-shadow: var(--btn-shadow-hover), var(--ring);
    }
    button:disabled, .button:disabled, .dropbtn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* ================== Ø²Ø± Logout ================== */
    .logout-btn {
      position: fixed;
      top: 18px;
      right: 24px;
      background: linear-gradient(90deg, #ff5858 0%, #f09819 100%);
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 7px 22px;
      font-size: 0.95rem;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(255,88,88,0.10);
      cursor: pointer;
      z-index: 2000;
      transition: background 0.3s, transform 0.2s;
      width: auto;
      min-width: 0;
      margin: 0;
      display: none;
    }
    .logout-btn.show { display: block; }
    .logout-btn:hover {
      background: linear-gradient(90deg, #f09819 0%, #ff5858 100%);
      transform: scale(1.04) rotate(-2deg);
    }

    /* ================== Dropdown ================== */
    .dropdown { position: relative; width: 100%; display: block; }
    .dropbtn { background: linear-gradient(135deg, #22c55e, #16a34a); }
    .dropdown-content {
      display: none;
      position: absolute;
      background: #1d2f54;
      min-width: 220px;
      max-height: 60vh;
      overflow-y: auto;
      box-shadow: 0 10px 24px rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 14px;
      z-index: 100;
      right: 0;
      top: 110%;
    }
    .dropdown.open .dropdown-content { display: block; }
    .dropdown-content button {
      background: transparent;
      color: #e8eef7;
      padding: 12px 16px;
      width: 100%;
      border: none;
      text-align: right;
      border-radius: 10px;
      font-size: 0.98rem;
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease;
    }
    .dropdown-content button:hover { background: rgba(255,255,255,0.06); color: #ffffff; }

    /* ================== Toast Ø§Ù„Ù†Ø³Ø® ================== */
    #copy-success {
      display:none;
      position:fixed;
      top:30px;
      right:30px;
      z-index:3000;
      background:#27ae60;
      color:#fff;
      padding:12px 28px;
      border-radius:30px;
      font-size:1.1rem;
      box-shadow:0 2px 12px #27ae6040;
      transition:opacity 0.4s;
      opacity:0;
      align-items:center;
      gap:10px;
    }
    #copy-success.show { display:flex; opacity:1; }
    button.copied {
      background: linear-gradient(90deg, #27ae60 0%, #43e97b 100%) !important;
      color: #fff !important;
      box-shadow: 0 2px 16px #27ae6040;
    }
    .hidden { display: none !important; }

    /* ================== Login UI Ø§Ù„Ø¬Ø¯ÙŠØ¯ ================== */
    .auth-wrapper {
      min-height: calc(100vh - 80px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px 40px;
    }
    .login-box {
      width: 100%;
      max-width: 460px;
      background: radial-gradient(circle at top left, rgba(59,130,246,0.35), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(6,182,212,0.25), transparent 55%),
                  rgba(15,23,42,0.88);
      border-radius: 22px;
      border: 1px solid rgba(148,163,184,0.3);
      box-shadow: 0 24px 80px rgba(15,23,42,0.7);
      padding: 26px 26px 22px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .login-box::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      padding: 1px;
      background: linear-gradient(135deg, rgba(59,130,246,0.8), rgba(6,182,212,0.8));
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }
    .login-inner { position: relative; z-index: 1; }
    .login-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.7rem;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
      color: #e5e7eb;
      margin: 0 auto 14px;
    }
    .pill-wrapper { text-align: center; }

    .login-box h2 {
      margin: 0 0 4px 0;
      color: #e5edff;
      font-size: 1.7rem;
      letter-spacing: 0.6px;
      text-align: center;
    }
    .login-subtitle {
      text-align: center;
      font-size: 0.85rem;
      color: #cbd5f5;
      margin-bottom: 18px;
      opacity: 0.9;
    }
    .login-fields { display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .field-wrapper { position: relative; }
    .field-label { font-size: 0.8rem; color: #cbd5e1; margin-bottom: 4px; }
    .field-wrapper .field-icon {
      position:absolute; top:50%; left:12px;
      transform: translateY(-50%);
      font-size: 0.95rem;
      opacity: 0.75;
      pointer-events:none;
    }
    .login-box input {
      width: 100%;
      padding: 12px 12px 12px 34px;
      margin: 0;
      border: 1px solid rgba(148,163,184,0.45);
      border-radius: 12px;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 150ms ease, box-shadow 150ms ease, background 150ms ease, transform 120ms ease;
    }
    .login-box input::placeholder { color: #64748b; }
    .login-box input:focus {
      border-color: rgba(59,130,246,0.9);
      box-shadow: 0 0 0 1px rgba(59,130,246,0.85), 0 0 24px rgba(59,130,246,0.45);
      background: rgba(15,23,42,0.98);
      transform: translateY(-1px);
    }
    .login-meta {
      display:flex; justify-content:space-between; align-items:center;
      margin: 6px 0 8px;
      font-size: 0.78rem;
      color: #9ca3af;
    }
    .login-meta-left { display:flex; align-items:center; gap:4px; }
    .login-meta-left input[type="checkbox"] { width:14px; height:14px; margin:0; accent-color:#3b82f6; }
    .login-meta a { color:#93c5fd; text-decoration:none; font-size:0.78rem; }
    .login-meta a:hover { text-decoration: underline; }

    .login-box button {
      width: 100%;
      padding: 13px 16px;
      border: 1px solid transparent;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--btn-bg-start), var(--btn-bg-end));
      color: #fff;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: background 180ms ease, transform 160ms ease, box-shadow 160ms ease;
      box-shadow: var(--btn-shadow);
      margin-top: 8px;
    }

    #login-error {
      display: none;
      color: #fecaca;
      background: rgba(127,29,29,0.25);
      border: 1px solid rgba(248,113,113,0.65);
      padding: 8px 10px;
      border-radius: 10px;
      margin-top: 10px;
      text-align: center;
      font-size: 0.8rem;
    }
  </style>
</head>

<body>
  <!-- ========== Modal Ù„Ø¹Ø±Ø¶ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ========== -->
  <div id="template-modal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeTemplateModal()">&times;</button>
      <h3 id="modal-template-title"></h3>
      <textarea id="modal-template-content" readonly></textarea>
      <button type="button" class="button" style="max-width:220px;margin:10px auto 0;display:block;" onclick="copyModalTemplate()">
        Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ù„Ø¨
      </button>
    </div>
  </div>

  <div class="header">Back Office Engineer</div>
  <div id="user-info"></div>

  <!-- ========== Login UI (English) ========== -->
  <div class="auth-wrapper">
    <div class="login-box" id="login-box">
      <div class="login-inner">
        <div class="pill-wrapper">
          <div class="login-pill">
            <span>ğŸ”</span>
            <span>Back Office Secure Access</span>
          </div>
        </div>

        <h2>Sign in</h2>
        <div class="login-subtitle">
          Enter your email and password to access your Back Office tools.
        </div>

        <form id="login-form">
          <div class="login-fields">
            <div class="field-wrapper">
              <div class="field-label">Email</div>
              <span class="field-icon">ğŸ“§</span>
              <input type="email" id="email" placeholder="name@example.com" required dir="ltr" />
            </div>

            <div class="field-wrapper">
              <div class="field-label">Password</div>
              <span class="field-icon">ğŸ”‘</span>
              <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required dir="ltr" />
            </div>
          </div>

          <div class="login-meta">
            <label class="login-meta-left">
              <input type="checkbox" />
              <span>Remember me</span>
            </label>
            <a href="javascript:void(0);" onclick="openContactModal()">Forgot password?</a>
          </div>

          <button type="submit" id="login-btn">Login</button>
          <div id="login-error"></div>

          <div class="login-footer-note">
            This system is for internal use only for Back Office engineers.
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ========== Extra templates (Tabadul) ========== -->
  <div id="extra-templates" class="hidden container" style="margin-top:40px;">
    <button class="button" onclick="hideExtraTemplates()" style="grid-column:1/-1;background:linear-gradient(90deg,#ff5858 0%,#f09819 100%);color:#fff;">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="button" onclick="openInNewTab('https://epg-ui.tabadul.iq/epg_gui/#login')">TABADUL</button>
    <button class="button" onclick="openInNewTab('https://watani.support.tabadul.iq/en/support/home')">TABADUL TIKET</button>
    <button class="button" onclick="copyText(' ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© Ù„Ù… ÙŠØµÙ„ otp (Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØµÙ„ ÙÙŠ Ø±Ø³Ø§Ù„Ø©) ÙˆØ§Ù„Ø­Ø±ÙƒØ© Ù…Ø±ÙÙˆØ¶Ø© Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯  ÙŠØ±Ø¬Ù‰ Ø§Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ ÙˆØ´ÙƒØ±Ø§')">No attempts left</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø©  Ø§Ù„Ø¬Ù‡Ø© Ù…ØµØ¯Ø±Ø©  Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØ´ÙƒØ±Ø§')">Do not honor transaction</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø©  Ø§Ù„Ø¬Ù‡Ø© Ù…ØµØ¯Ø±Ø©  Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØ´ÙƒØ±Ø§')">Cannot process transaction</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ ÙˆÙ‚Øª Ø§Ø®Ø± (15-30 Ø¯Ù‚ÙŠÙ‚Ø© ) Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† / Ø§Ùˆ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…ØµØ¯Ø±Ø© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© ÙˆØ´ÙƒØ±Ø§')">Session time limit</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© Ù„Ù… ÙŠØµÙ„ otp (Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØµÙ„ ÙÙŠ Ø±Ø³Ø§Ù„Ø©) ÙˆØ§Ù„Ø­Ø±ÙƒØ© Ù…Ø±ÙÙˆØ¶Ø© ÙŠØ±Ø¬Ù‰ Ø§Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ù‡ Ø§Ø®Ø± Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆÙÙŠ Ø­Ø§Ù„ Ø§Ù„ÙØ´Ù„ Ù…Ø±Ù‡ Ø§Ø®Ø±Ù‰ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…ØµØ¯Ø±Ø© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© ÙˆØ´ÙƒØ±Ø§')">3DS2 CReq cancelled</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§Ù†ØªØ±Ù†Øª ÙŠØ±Ø¬Ù‰ Ø§Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§ ÙˆÙÙŠ Ø­Ø§Ù„ Ø§Ù„ÙØ´Ù„ Ù…Ø±Ø© Ø§Ø®Ø±Ù‰ ÙŠØ±Ø§Ø¬Ø¹ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…ØµØ¯Ø±Ø© Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØ´ÙƒØ±Ø§')">processing.error</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ØªÙ… Ø§Ù„ØªØ¬ÙŠÙŠÙƒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±ØµÙŠØ¯ ÙƒØ§ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙˆØ´ÙƒØ±Ø§')">Not enough money</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ØªÙ… Ø§Ù„ØªØ¬ÙŠÙŠÙƒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø©  Ø§Ù„Ø¬Ù‡Ø© Ù…ØµØ¯Ø±Ø©  Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆØ´ÙƒØ±Ø§')">TDS_AUTH_FAILED</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ØªØ¬Ø§ÙˆØ² Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© (10 Ø¯Ù‚Ø§Ø¦Ù‚) ÙŠØ±Ø¬Ù‰ Ø§Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ù‡ Ø§Ø®Ø±Ù‰ Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ø²Ø¨ÙˆÙ†  ÙˆØ´ÙƒØ±Ø§')">Limit exceeded</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ( ÙÙŠØ²Ø§ Ø§Ùˆ Ù…Ø§Ø³ØªØ± ÙƒØ§Ø±Ø¯) ÙˆØ´ÙƒØ±Ø§')">Payment failed. Cann&apos;t connect to Payment Gate</button>
    <button class="button" onclick="copyText('ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ØªÙ… Ø§Ù„ØªØ¬ÙŠÙŠÙƒ ÙƒÙˆØ¯ otp (Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø°ÙŠ ÙŠØµÙ„ ÙÙŠ Ø±Ø³Ø§Ù„Ø©) Ù„Ù… ØªØªÙ… ÙƒØªØ§Ø¨ØªÙ‡ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØµØ­ÙŠØ­Ø© Ø§Ùˆ ØªÙ… Ø§Ù„ØªØ§Ø®ÙŠØ± ÙÙŠ ÙƒØªØ§Ø¨ØªÙ‡ ÙÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ù‡ Ø£Ø®Ø±Ù‰ Ù„ØªØªÙ… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ ÙˆØ´ÙƒØ±Ø§')">3DS2 authentication successful</button>
  </div>

  <!-- ========== FeedBack Templates ========== -->
  <div id="feedback-templates" class="hidden container" style="margin-top:40px;">
    <button class="button" onclick="hideFeedBackTemplates()" style="grid-column:1/-1;background:linear-gradient(90deg,#ff5858 0%,#f09819 100%);color:#fff;">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

    <input id="feedback-templates-search" type="text" placeholder="Ø¨Ø­Ø« Ø¯Ø§Ø®Ù„ Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„ØªØºØ°ÙŠØ©..."
      style="grid-column:1/-1;padding:10px 12px;border-radius:10px;border:1px solid #d1d5db;font-size:0.95rem;margin-bottom:10px;"
      oninput="filterTemplateButtons('feedback-templates', this.value)" />

    <button class="button" onclick="copyTemplateText('feedtemplates/templates1.txt', this)">Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø¨Ø§ÙˆØ± ÙˆØ§Ù„Ù‚Ø·Ø¹</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template3.txt', this)">ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template4.txt', this)">ØªØ£Ø¬ÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template5.txt', this)">Ø±ÙØ¶ Ø§Ù„ØµÙŠØ§Ù†Ù‡ (Ø§Ù„Ø®Ø¯Ù…Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©)</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template20.txt', this)">Ø§Ù„Ø²Ø¨ÙˆÙ† Ø±ÙØ¶ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template6.txt', this)">Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template7.txt', this)">Ø¶Ø¹Ù Ø§Ù„Ø®Ø¯Ù…Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template8.txt', this)">Ø§Ù„ÙŠÙˆØ²Ø± Ø§ÙˆÙÙ„Ø§ÙŠÙ†</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template9.txt', this)">Ø¬ÙƒØ© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template10.txt', this)">Ù„Ù… ÙŠØªÙ… Ø­Ù„ Ø§Ù„Ø§Ø´ÙƒØ§Ù„</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template11.txt', this)">Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù…ÙˆØ¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template12.txt', this)">Ø´ÙƒØ±Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ù‡</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template13.txt', this)">ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ·Ù„Ø¨ ØµÙŠØ§Ù†Ù‡</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template15.txt', this)">Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ÙŠØ§Ù… Ø§Ù„Ø§Ø¶Ø§ÙÙŠØ©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template16.txt', this)">ØªØºÙŠÙŠØ± Ø³ÙŠØ±ÙŠØ§Ù„ Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template27.txt', this)">ØªØºÙŠÙŠØ± Ø³ÙŠØ±ÙŠØ§Ù„ 360</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template17.txt', this)">Ø·Ù„Ø¨ Ø§Ù„ØºØ§Ø¡ Ø±ÙŠÙƒÙˆØ³Øª Ø¬Ø¯ÙŠØ¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template19.txt', this)">Ù„Ø§ ÙŠØ´Ù…Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template21.txt', this)">ÙŠØ±Ø¬Ù‰ Ø°ÙƒØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template22.txt', this)">Ø¬Ø§Ø± Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ù‡ ÙÙŠ ØªÙƒØª</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template23.txt', this)">Ù…Ø´ÙƒÙ„Ø© Ø¹Ø¯Ù… Ù…Ù„Ø¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template24.txt', this)">Ø·Ù„Ø¨ ØªØºÙŠÙŠØ± Ø²ÙˆÙ† Ù„ÙÙŠØ±Ø¬ÙˆØ§Ù„ Ø¨ÙŠÙ†Ø¯Ù†Ùƒ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template25.txt', this)">Ø·Ù„Ø¨ ØªØºÙŠÙŠØ± Ø¨Ø§Ø³ÙˆØ±Ø¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template26.txt', this)">ØªØºÙŠÙŠØ± Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø¨Ø¯ÙˆÙ† Ø¨Ø§Ø³ÙˆØ±Ø¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template28.txt', this)">Ø·Ù„Ø¨ ØªØºÙŠÙŠØ± Ø²ÙˆÙ†</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template29.txt', this)">Ø¯Ø¹ÙˆØ© ØµØ¯ÙŠÙ‚ Ø§ÙƒØ« Ù…Ù† 2</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template30.txt', this)">Ø·Ù„Ø¨ Ù†Ù‚Ù„ Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„ÙˆÙƒÙŠÙ„</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template31.txt', this)">ØªØ·Ø¨ÙŠÙ‚ Ø´Ø§Ù‡Ø¯</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template32.txt', this)">Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙ„ÙØ§Ø¦ÙŠ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template34.txt', this)">Ø¶Ø¹Ù Ø®Ø¯Ù…Ø©</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template33.txt', this)">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ø´ØªØ±Ø§Ùƒ Ù†Ù‚Øµ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template35.txt', this)">Ø·Ù„Ø¨ ØªÙˆØ¶ÙŠÙ</button>
    <button class="button" onclick="copyTemplateText('feedtemplates/template36.txt', this)">TEST</button>
  </div>

  <!-- ========== Email Templates ========== -->
  <div id="email-templates" class="hidden container" style="margin-top:40px;">
    <button class="button" onclick="hideEmailTemplates()" style="grid-column:1/-1;background:linear-gradient(90deg,#ff5858 0%,#f09819 100%);color:#fff;">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

    <input id="email-templates-search" type="text" placeholder="Ø¨Ø­Ø« Ø¯Ø§Ø®Ù„ Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„..."
      style="grid-column:1/-1;padding:10px 12px;border-radius:10px;border:1px solid #d1d5db;font-size:0.95rem;margin-bottom:10px;"
      oninput="filterTemplateButtons('email-templates', this.value)" />

    <button class="button" onclick="showTemplateContent('templates/template6.txt', this)">Zone Down</button>
    <button class="button" onclick="showTemplateContent('templates/template21.txt', this)">Zone complex Down</button>
    <button class="button" onclick="showTemplateContent('templates/template1.txt', this)">Portal Slow</button>
    <button class="button" onclick="showTemplateContent('templates/template2.txt', this)">DNS Problem</button>
    <button class="button" onclick="showTemplateContent('templates/template3.txt', this)">Portal stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template4.txt', this)">Problem Refill users</button>
    <button class="button" onclick="showTemplateContent('templates/template5.txt', this)">Drop Services</button>
    <button class="button" onclick="showTemplateContent('templates/template7.txt', this)">Attachment issue</button>
    <button class="button" onclick="showTemplateContent('templates/template8.txt', this)">Most GPON Down</button>
    <button class="button" onclick="showTemplateContent('templates/template9.txt', this)">OLT Down MGM</button>
    <button class="button" onclick="showTemplateContent('templates/template10.txt', this)">Operation Outage</button>
    <button class="button" onclick="showTemplateContent('templates/template11.txt', this)">Site down</button>
    <button class="button" onclick="showTemplateContent('templates/template12.txt', this)">OTP Service Stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template13.txt', this)">Alwatani App Stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template14.txt', this)">Wallet transactions Issue</button>
    <button class="button" onclick="showTemplateContent('templates/template15.txt', this)">Sales Portal stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template16.txt', this)">Almanasa stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template17.txt', this)">Creatio stopped</button>
    <button class="button" onclick="showTemplateContent('templates/template18.txt', this)">Customer Onboarding Request Issue</button>
    <button class="button" onclick="showTemplateContent('templates/template19.txt', this)">VLAN Site activation</button>
    <button class="button" onclick="showTemplateContent('templates/template20.txt', this)">ADD FAT TO CREATIO</button>

    <textarea id="template-content-viewer" rows="12"
      style="width:100%;font-size:1.1em;direction:ltr;resize:vertical;margin-top:18px;display:none;"
      readonly placeholder="Ø³ÙŠØ¸Ù‡Ø± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ù‡Ù†Ø§..."></textarea>
  </div>
  
<!-- âœ…âœ…âœ… NEW: TEST Templates Section -->
<div id="test-templates" class="hidden container" style="margin-top:40px;">
  <button class="button" onclick="hideTestTemplates()"
    style="grid-column:1/-1;background:linear-gradient(90deg,#ff5858 0%,#f09819 100%);color:#fff;">
    Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </button>

  <!-- âœ… Ù…Ø«Ù„ Templates: ÙŠÙØªØ­ Ù…ÙˆØ¯Ø§Ù„ ÙˆÙŠØ¹Ø±Ø¶ Ø§Ù„Ù†Øµ -->
  <button class="button" onclick="showTemplateContent('TEMPDEV/TEMPDEV1.txt', this)">Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
  <button class="button" onclick="showTemplateContent('TEMPDEV/TEMPDEV2.txt', this)">Ø§Ø³ØªÙ‚Ø·Ø§Ø¹ ÙˆÙ„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¬Ø¯ÙŠØ¯</button>
  <button class="button" onclick="showTemplateContent('TEMPDEV/TEMPDEV3.txt', this)">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ø§ ØªØ¸Ù‡Ø±</button>
</div>


  <!-- ========== Custom FATS Templates ========== -->
  <div id="custom-templates" class="hidden container" style="margin-top:40px;">
    <button class="button" onclick="hideCustomTemplates()" style="grid-column:1/-1;background:linear-gradient(90deg,#ff5858 0%,#f09819 100%);color:#fff;">Ø¹ÙˆØ¯Ø© Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„ØªØºØ°ÙŠØ©</button>

    <div id="showFeedBackFATS" class="container" style="margin-top:24px;grid-column:1/-1;">
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template1.txt', this)">ÙŠÙˆØ¬Ø¯ Ø¨Ø§ÙˆØ± Ø·Ø¨ÙŠØ¹ÙŠ ÙÙŠ Ø§Ù„Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template2.txt', this)">Ø·Ù„Ø¨ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template13.txt', this)">Ø§Ø¶Ø§ÙØ© Ø¹Ø§Ù…ÙˆØ¯ Ø¹Ù„Ù‰ Ø¨Ù†Ø§ÙŠØ©</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template5.txt', this)">Ø·Ù„Ø¨ ØªÙˆØ³ÙŠØ¹ Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template4.txt', this)">Ø·Ù„Ø¨ Ø§Ø¶Ø§ÙØ© Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template8.txt', this)">Ø·Ù„Ø¨ ØªØ´ÙÙŠØª Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template7.txt', this)">Ù…Ø´ÙƒÙ„Ù‡ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙˆØ±ØªØ§Øª Ø¨Ø¯ÙˆÙ† ØµÙˆØ±Ø©</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template11.txt', this)">Ø§Ù„Ø¨Ø§ÙˆØ± Ù…Ø°Ø¨Ø°Ø¨</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template9.txt', this)">Ø¬Ø§Ø± Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ù‡</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template6.txt', this)">Waiting for response</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template10.txt', this)">Ø§Ù‚Ù„ Ù…Ù† 13 Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template12.txt', this)">Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø¨Ø§ÙˆØ± Ø·Ø¨ÙŠØ¹ÙŠ</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template14.txt', this)">Ø·Ù„Ø¨ ØªØµÙÙŠØ© Ø¹Ø§Ù…ÙˆØ¯</button>
      <button class="button" onclick="copyTemplateText('FeedBackFATS/template15.txt', this)">TEST</button>
    </div>
  </div>

  <!-- ========== Main Buttons Dashboard ========== -->
  <div class="container" id="main-buttons" style="display:none;">
    <div class="dropdown">
      <button class="dropbtn" tabindex="0">Templates</button>
      <div class="dropdown-content">
        <button onclick="showFeedBackTemplates()">FEED BACK NEW</button>
        <button onclick="showCustomTemplates()">FEED BACK FATS</button>
        <button onclick="showEmailTemplates()">Templates EMAIL</button>
        <button onclick="showExtraTemplates()">tabadul Template</button>
        <button onclick="showTestTemplates()">Dev Template</button>
      </div>
    </div>

    <button onclick="window.open('QGIS-MOHA.HTML', '_blank')">QGIS-MOHA</button>
    <button onclick="window.open('http://10.6.115.12:4750/login', '_blank')">tuuunel</button>
    <button onclick="window.open('https://192.168.219.126/zabbix.php?action=dashboard.view', '_blank')">ZABBIX</button>
    <button onclick="window.open('http://10.6.115.5:4500/dashboard', '_blank')">NOC Portal</button>
    <button onclick="window.open('https://sso.ftth.iq/auth/admin/master/console/#/realms/Customers/users', '_blank')">SSO FTTH</button>
    <button onclick="window.open('https://alwatani-requests.netlify.app/vacations.html', '_blank')">Vacation Calendar</button>
    <button onclick="window.open('https://backoffice.giize.com/login.html', '_blank')">BackOffice CASE</button>
    <button onclick="window.open('https://hris.earthlink.iq/login', '_blank')">HRIS</button>
    <button onclick="window.open('https://kb.ftth.iq/', '_blank')">Knowledge Base</button>
    <button onclick="window.open('https://ticket.earthlink.iq/Tickets/AddTicket.aspx?showpage=add&tickettype=pointticket&ID=90671')">New Ticket DEV</button>
    <button onclick="window.open('zayona-sheet.html', '_blank')">zayona</button>
    <button onclick="window.open('Access-Data.html', '_blank')">Access Data</button>

    <div class="dropdown">
      <button class="dropbtn" tabindex="0">Grafana</button>
      <div class="dropdown-content">
        <button onclick="window.open('https://dash.elcld.net/d/dZPegMo7z/ftth-online-users?orgId=1', '_blank')">FTTH Online Users</button>
        <button onclick="window.open('https://dash.elcld.net/d/e2ae3a51-0940-463c-964a-d38ab54f224d/04236846-084b-576a-a37a-26c3246998dc?orgId=1&refresh=5m&viewPanel=45', '_blank')">Monitor FTTH Zones</button>
        <button onclick="window.open('https://dash.elcld.net/d/dZPegMo7z/ftth-online-users?orgId=1&viewPanel=35', '_blank')">Active Users</button>
      </div>
    </div>

    <div class="dropdown">
      <button class="dropbtn" tabindex="0">IT HELPDESK</button>
      <div class="dropdown-content">
        <button onclick="window.open('https://pwm.earthlink.iq/pwm/private/login')">PWM</button>
        <button onclick="window.open('https://vpn.earthlink.iq/')">VPN</button>
        <button onclick="window.open('https://otp.el.earthlink.iq/#!/login')">PRIVACY ID AUTHENTICATOR</button>
        <button onclick="window.open('https://ipa01.el.earthlink.iq/ipa/ui/')">HRMS</button>
        <button onclick="window.open('https://hrms.elcld.net/interface/html5/#!m=Login')">TIMETREX</button>
      </div>
    </div>

    <div class="dropdown">
      <button class="dropbtn" tabindex="0">JW</button>
      <div class="dropdown-content">
        <button onclick="window.open('https://jwdx.earthlink.iq/jw/web/userview/FTTH_SiteDelivery/FTTH_SiteDeliveryView/_/inbox', '_blank')">ZONE DELIVERY #24</button>
        <button onclick="window.open('https://jwdx.earthlink.iq/jw/web/userview/FTTH_ZoneUpgrade/FTTH_ZoneUpgradeView/_/inbox', '_blank')">ZONE UPGRADE #67</button>
        <button onclick="window.open('https://jwdx.earthlink.iq/jw/web/userview/virtualZoneOnboarding/virtualZoneOnboarding/_/inbox', '_blank')">VIRTUAL ZONE #77</button>
        <button onclick="window.open('https://jwdx.earthlink.iq/jw/web/userview/fdtDeactivationProcess/fdtDeactivationProcess/_/inbox', '_blank')">Deactivation ZONE #74</button>
        <button onclick="window.open('https://jwdx.earthlink.iq/jw/web/userview/virtualZoneManagement/virtualZoneManagement/_/inbox', '_blank')">USERS #85</button>
      </div>
    </div>
  </div>

  <button id="logout-btn" class="logout-btn">Logout</button>

  <div id="copy-success">
    <span style="font-size:1.5em;vertical-align:middle;">âœ”ï¸</span> ØªÙ… Ø§Ù„Ù†Ø³Ø®
  </div>

  <!-- Modal: Contact Info -->
  <div id="contact-modal" class="modal-overlay">
    <div class="modal-content" style="max-width:600px; min-width:400px;">
      <button class="modal-close-btn" onclick="closeContactModal()">&times;</button>
      <h3>Contact Support</h3>
      <div style="font-size:1.2rem; color:#fff; margin-top:20px; line-height:1.8;">
        <b>Name:</b> Mohammed Muthanna <br>
        <b>Email:</b> muhmuthana@earthlink.iq <br>
        <b>Phone:</b> +964 07838938382 <br><br>
        If you need to reset your password or recover your account,
        please contact the Back Office support engineer using the information above.
      </div>
    </div>
  </div>

  <!-- âœ… Supabase (Ù…Ø±Ø© ÙˆØ­Ø¯Ø© ÙÙ‚Ø·) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

  <script>
    // ========= Supabase Client =========
    const SUPABASE_URL = "https://hkzfxpqjrwyxetsjdjor.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhremZ4cHFqcnd5eGV0c2pkam9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjkyMjQsImV4cCI6MjA2NzQwNTIyNH0.qR9hBlQ4crAiLmKO0gd9JNfo2Jj95dvEE6E2oc9E9Lw";

    // âœ… Ù„Ø§ ØªØ³Ù…ÙŠÙ‡Ø§ supabase Ø­ØªÙ‰ Ù…Ø§ ØªØµÙŠØ± collision
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // ========= Elements =========
    const loginForm = document.getElementById('login-form');
    const loginBox = document.getElementById('login-box');
    const authWrapper = document.querySelector('.auth-wrapper');
    const loginError = document.getElementById('login-error');
    const loginBtn = document.getElementById('login-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const mainButtons = document.getElementById('main-buttons');
    const feedbackTemplates = document.getElementById('feedback-templates');
    const customTemplates = document.getElementById('custom-templates');
    const extraTemplates = document.getElementById('extra-templates');
    const emailTemplates = document.getElementById('email-templates');

    // âœ… NEW
    const testTemplates = document.getElementById('test-templates');

    const showFeedBackFATS = document.getElementById('showFeedBackFATS');
    const userInfo = document.getElementById('user-info');

    // ========= Dropdown Logic =========
    document.querySelectorAll('.dropdown').forEach(function(drop){
      const btn = drop.querySelector('.dropbtn');
      const content = drop.querySelector('.dropdown-content');
      let over = false;

      function openDropdown() { drop.classList.add('open'); }
      function closeDropdown(){ drop.classList.remove('open'); }

      btn.addEventListener('mouseenter', openDropdown);
      btn.addEventListener('focus', openDropdown);
      btn.addEventListener('click', function(e){
        e.stopPropagation();
        drop.classList.toggle('open');
      });

      btn.addEventListener('mouseleave', function(){
        setTimeout(function(){ if (!over) closeDropdown(); }, 100);
      });

      content.addEventListener('mouseenter', function(){
        over = true; openDropdown();
      });
      content.addEventListener('mouseleave', function(){
        over = false; closeDropdown();
      });
    });

    document.body.addEventListener('click', function(){
      document.querySelectorAll('.dropdown').forEach(d=>d.classList.remove('open'));
    });

    // ========= Login Helpers =========
    function setLoginError(msg){
      if (!loginError) return;
      if (!msg) {
        loginError.textContent = '';
        loginError.style.display = 'none';
        return;
      }
      loginError.textContent = msg;
      loginError.style.display = 'block';
    }

    // ========= Login Logic (Supabase) =========
    loginForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;

      setLoginError('');

      if (loginBtn) {
        loginBtn.disabled = true;
        loginBtn.textContent = 'Signing in...';
      }

      try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });
        console.log('Supabase response:', { data, error });

        if (error) {
          setLoginError(error.message || 'Invalid credentials or connection issue.');
          return;
        }

        // Success
        if (authWrapper) authWrapper.style.display = 'none';
        if (loginBox) loginBox.style.display = 'none';

        if (mainButtons) mainButtons.style.display = 'grid';

        if (feedbackTemplates) feedbackTemplates.classList.add('hidden');
        if (customTemplates) customTemplates.classList.add('hidden');
        if (extraTemplates) extraTemplates.classList.add('hidden');
        if (emailTemplates) emailTemplates.classList.add('hidden');
        if (testTemplates) testTemplates.classList.add('hidden'); // âœ… NEW
        if (showFeedBackFATS) showFeedBackFATS.classList.add('hidden');

        if (logoutBtn) logoutBtn.classList.add('show');

        if (data?.user?.email && userInfo) {
          userInfo.textContent = 'Logged in as: ' + data.user.email;
        }
      } catch (err) {
        console.error('Unexpected error:', err);
        setLoginError(err?.message || 'An unexpected error occurred.');
      } finally {
        if (loginBtn) {
          loginBtn.disabled = false;
          loginBtn.textContent = 'Login';
        }
      }
    });

    // ========= Logout =========
    logoutBtn.addEventListener('click', async function() {
      await supabaseClient.auth.signOut();

      if (mainButtons) mainButtons.style.display = 'none';
      if (feedbackTemplates) feedbackTemplates.classList.add('hidden');
      if (customTemplates) customTemplates.classList.add('hidden');
      if (extraTemplates) extraTemplates.classList.add('hidden');
      if (emailTemplates) emailTemplates.classList.add('hidden');
      if (testTemplates) testTemplates.classList.add('hidden'); // âœ… NEW
      if (showFeedBackFATS) showFeedBackFATS.classList.add('hidden');

      if (authWrapper) authWrapper.style.display = 'flex';
      if (loginBox) loginBox.style.display = 'block';
      if (logoutBtn) logoutBtn.classList.remove('show');

      loginForm.reset();
      setLoginError('');
      if (userInfo) userInfo.textContent = '';
    });

    // ========= Helpers =========
    function copyText(text) {
      const active = document.activeElement;
      navigator.clipboard.writeText(text);
      const el = document.getElementById('copy-success');
      if (el) {
        el.classList.add('show');
        setTimeout(()=>{el.classList.remove('show');}, 2000);
      }
      if (active && active.classList && active.classList.contains('button')) {
        active.classList.add('copied');
        setTimeout(()=>active.classList.remove('copied'), 2000);
      }
    }

    function openInNewTab(url) { window.open(url, '_blank'); }

    async function copyTemplateText(filePath, btn) {
      try {
        const response = await fetch(filePath);
        if (!response.ok) throw new Error('File not found');
        const text = await response.text();
        await navigator.clipboard.writeText(text);

        if (btn) {
          btn.classList.add('copied');
          setTimeout(()=>btn.classList.remove('copied'), 2000);
        }
        const el = document.getElementById('copy-success');
        if (el) {
          el.classList.add('show');
          setTimeout(()=>{el.classList.remove('show');}, 2000);
        }
      } catch (e) {
        alert('Copy failed: ' + e.message);
      }
    }

    function showTemplateContent(path, btn) {
      fetch(path)
        .then(res => res.text())
        .then(txt => {
          const modal = document.getElementById('template-modal');
          const title = document.getElementById('modal-template-title');
          const content = document.getElementById('modal-template-content');
          title.textContent = btn ? btn.textContent : 'Template';
          content.value = txt;
          modal.classList.add('show');
        })
        .catch(() => {
          const modal = document.getElementById('template-modal');
          const title = document.getElementById('modal-template-title');
          const content = document.getElementById('modal-template-content');
          title.textContent = btn ? btn.textContent : 'Template';
          content.value = 'Failed to load template';
          modal.classList.add('show');
        });
    }

    function closeTemplateModal() {
      document.getElementById('template-modal').classList.remove('show');
    }

    function copyModalTemplate() {
      const textarea = document.getElementById('modal-template-content');
      if (!textarea) return;
      const text = textarea.value || '';
      if (!text.trim()) { alert('No content to copy.'); return; }

      navigator.clipboard.writeText(text)
        .then(() => {
          const el = document.getElementById('copy-success');
          if (el) {
            el.classList.add('show');
            setTimeout(() => el.classList.remove('show'), 2000);
          } else {
            alert('Copied âœ…');
          }
        })
        .catch(() => alert('Copy failed, try again.'));
    }

    function filterTemplateButtons(sectionId, query) {
      const container = document.getElementById(sectionId);
      if (!container) return;
      const q = (query || '').toLowerCase().trim();

      container.querySelectorAll('.button').forEach(btn => {
        if (btn.textContent.includes('Ø¹ÙˆØ¯Ø©')) {
          btn.style.display = 'block';
          return;
        }
        const text = btn.textContent.toLowerCase();
        btn.style.display = (!q || text.includes(q)) ? 'block' : 'none';
      });
    }

    // ========= Show / Hide Sections =========
    function showFeedBackTemplates() {
      mainButtons.classList.add('hidden');
      feedbackTemplates.classList.remove('hidden');
    }
    function hideFeedBackTemplates() {
      feedbackTemplates.classList.add('hidden');
      mainButtons.classList.remove('hidden');
    }

    function showCustomTemplates() {
      mainButtons.classList.add('hidden');
      feedbackTemplates.classList.add('hidden');
      extraTemplates.classList.add('hidden');
      emailTemplates.classList.add('hidden');
      if (testTemplates) testTemplates.classList.add('hidden'); // âœ… NEW
      customTemplates.classList.remove('hidden');
      showFeedBackFATS.classList.remove('hidden');
    }
    function hideCustomTemplates() {
      customTemplates.classList.add('hidden');
      mainButtons.classList.remove('hidden');
      showFeedBackFATS.classList.add('hidden');
    }

    function showExtraTemplates() {
      mainButtons.classList.add('hidden');
      feedbackTemplates.classList.add('hidden');
      customTemplates.classList.add('hidden');
      emailTemplates.classList.add('hidden');
      if (testTemplates) testTemplates.classList.add('hidden'); // âœ… NEW
      extraTemplates.classList.remove('hidden');
    }
    function hideExtraTemplates() {
      extraTemplates.classList.add('hidden');
      mainButtons.classList.remove('hidden');
    }

    function showEmailTemplates() {
      mainButtons.classList.add('hidden');
      feedbackTemplates.classList.add('hidden');
      customTemplates.classList.add('hidden');
      extraTemplates.classList.add('hidden');
      if (testTemplates) testTemplates.classList.add('hidden'); // âœ… NEW
      emailTemplates.classList.remove('hidden');
    }
    function hideEmailTemplates() {
      emailTemplates.classList.add('hidden');
      mainButtons.classList.remove('hidden');
    }

    // âœ…âœ…âœ… NEW: Test Section show/hide
    function showTestTemplates() {
      mainButtons.classList.add('hidden');
      feedbackTemplates.classList.add('hidden');
      customTemplates.classList.add('hidden');
      extraTemplates.classList.add('hidden');
      emailTemplates.classList.add('hidden');
      showFeedBackFATS.classList.add('hidden');
      if (testTemplates) testTemplates.classList.remove('hidden');
    }
    function hideTestTemplates() {
      if (testTemplates) testTemplates.classList.add('hidden');
      mainButtons.classList.remove('hidden');
    }

    // ========= Contact Modal =========
    function openContactModal() {
      document.getElementById('contact-modal').classList.add('show');
    }
    function closeContactModal() {
      document.getElementById('contact-modal').classList.remove('show');
    }
  </script>
</body>
</html>
